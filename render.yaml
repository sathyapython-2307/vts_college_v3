# Single Render service configuration. Adjust `plan` and env vars in the
# Render dashboard as needed.
services:
  - type: web
    name: vts-college
    env: python
    plan: free
    buildCommand: pip install -r requirements-pinned.txt && python manage.py migrate --noinput && python manage.py collectstatic --noinput
    startCommand: ./start.sh
    healthCheckPath: /healthz/
    envVars:
      - key: DATABASE_URL
        sync: false
      - key: SECRET_KEY
        sync: false
      - key: DEBUG
        value: "False"
      - key: ALLOWED_HOSTS
        value: localhost,127.0.0.1
      - key: RAZORPAY_ENABLED
        value: true
      - key: RAZORPAY_KEY_ID
        sync: false
      - key: RAZORPAY_KEY_SECRET
        sync: false
    autoDeploy: true

# Optional managed database block; Render can provision a Postgres DB and
# expose the `connectionString` which you then paste into `DATABASE_URL`.
databases:
  - name: vts_college_db
    databaseName: vts_college
    user: vts_college
    plan: free