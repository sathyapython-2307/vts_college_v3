{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}{{ title }} | Django Administration{% endblock %}

{% block extrahead %}
<style>
  .bulk-upload-container {
    max-width: 800px;
    margin: 20px auto;
    background: white;
    padding: 30px;
    border-radius: 6px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }
  .upload-section {
    margin-bottom: 30px;
  }
  .upload-section h2 {
    color: #333;
    font-size: 20px;
    margin-bottom: 15px;
    border-bottom: 2px solid #417690;
    padding-bottom: 10px;
  }
  .upload-section p {
    color: #666;
    line-height: 1.6;
    margin-bottom: 15px;
  }
  .csv-fields {
    background: #f9f9f9;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 15px;
    margin: 15px 0;
    font-family: monospace;
    font-size: 13px;
  }
  .csv-fields strong {
    color: #417690;
  }
  .form-group {
    margin: 20px 0;
  }
  .form-group label {
    display: block;
    color: #333;
    font-weight: bold;
    margin-bottom: 8px;
  }
  .form-group input[type="file"] {
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  .button-group {
    margin-top: 20px;
    display: flex;
    gap: 10px;
  }
  .submit-btn {
    background: #417690;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    transition: background 0.3s;
  }
  .submit-btn:hover {
    background: #2d5173;
  }
  .back-btn {
    background: #999;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    text-decoration: none;
    display: inline-block;
  }
  .back-btn:hover {
    background: #777;
  }
  .example-csv {
    background: #f0f0f0;
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 15px;
    margin: 15px 0;
    overflow-x: auto;
  }
  .example-csv pre {
    margin: 0;
    font-size: 12px;
    line-height: 1.4;
  }
</style>
{% endblock %}

{% block content %}
<div class="bulk-upload-container">
  <h1>{{ title }}</h1>

  <div class="upload-section">
    <h2>üìã How to Upload Questions</h2>
    <p>
      Upload a CSV file with the following columns (order matters):
    </p>
    <div class="csv-fields">
      <strong>Required columns:</strong><br>
      order, question_text, option_a, option_b, option_c, option_d, correct_answer<br><br>
      <strong>Optional columns:</strong><br>
      explanation, is_active
    </div>
  </div>

  <div class="upload-section">
    <h2>üìù Example CSV Format</h2>
    <div class="example-csv">
      <pre>order,question_text,option_a,option_b,option_c,option_d,correct_answer,explanation,is_active
1,"What is the capital of France?","Paris","London","Berlin","Madrid",A,"Paris is the capital and largest city of France.",true
2,"What is 2 + 2?","3","4","5","6",B,"2 + 2 equals 4.",true
3,"Which planet is closest to the sun?","Venus","Earth","Mercury","Mars",C,"Mercury is the closest planet to the sun.",true</pre>
    </div>
  </div>

  <div class="upload-section">
    <h2>‚öôÔ∏è Upload Your CSV</h2>
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-group">
        <label for="csv_file">Select CSV File:</label>
        <input type="file" id="csv_file" name="csv_file" accept=".csv" required>
      </div>
      <div class="button-group">
        <button type="submit" class="submit-btn">Upload Questions</button>
        <a href="{% url 'admin:core_courseexam_change' exam.pk %}" class="back-btn">Cancel</a>
      </div>
    </form>
  </div>

  <div class="upload-section">
    <h2>‚ÑπÔ∏è Tips & Rules</h2>
    <ul style="color: #666; line-height: 1.8;">
      <li><strong>Correct Answer:</strong> Must be A, B, C, or D (case insensitive)</li>
      <li><strong>Order:</strong> Auto-incremented if not provided</li>
      <li><strong>is_active:</strong> Use "true", "1", or "yes" to activate; defaults to true</li>
      <li><strong>Empty Rows:</strong> Rows with no question_text are automatically skipped</li>
      <li><strong>Explanation:</strong> Optional detailed explanation shown after exam submission</li>
      <li><strong>Excel Users:</strong> Export your spreadsheet as .csv from Excel's "Save As" menu</li>
    </ul>
  </div>
</div>
{% endblock %}
